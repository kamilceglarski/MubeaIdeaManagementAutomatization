--ZGŁOSZONE

-- >> KROK 1: Ustaw swoje parametry tutaj <<
DECLARE @Rok INT = 2024;
DECLARE @MiesiacStart INT = 1; -- 1 = Styczeń
DECLARE @MiesiacKoniec INT = 7; -- 7 = Lipiec
DECLARE @Dzial NVARCHAR(50) = 'CP';

-- >> KROK 2: Wykonaj zapytanie <<
SELECT
    COUNT(*) AS LiczbaWnioskow
FROM
    dbo.WnioskiIdeaManagement
WHERE
    YEAR(DataZgloszenia) = @Rok
    AND MONTH(DataZgloszenia) >= @MiesiacStart
    AND MONTH(DataZgloszenia) <= @MiesiacKoniec
    AND Dzial = @Dzial;


--ZGŁOSZONE OTWARTE 

-- >> KROK 1: Ustaw swoje parametry tutaj <<
DECLARE @RokDocelowy INT = 2024;
DECLARE @MiesiacDocelowy INT = 12; -- 8 = Sierpień
DECLARE @Dzial NVARCHAR(100) = 'CP';

-- >> KROK 2: Wykonaj zapytanie <<
-- Automatyczne obliczenie daty końcowej na podstawie parametrów
DECLARE @DataKoncowa DATE = EOMONTH(DATEFROMPARTS(@RokDocelowy, @MiesiacDocelowy, 1));
DECLARE @DataPoczatkowa DATE = '2023-01-01';

SELECT
    COUNT(*) AS LiczbaWnioskow
FROM
    dbo.WnioskiIdeaManagement
WHERE
    -- Warunek 1: Data zgłoszenia jest w zdefiniowanym przedziale
    DataZgloszenia BETWEEN @DataPoczatkowa AND @DataKoncowa
    
    -- Warunek 2: Dział jest zgodny z parametrem
    AND Dzial = @Dzial
    
    -- Warunek 3: Status to 'Zatwierdzony'
    AND StatusWniosku = 'Zatwierdzony'
    
    -- Warunek 4: ProgressBar jest różny od 1 (lub jest pusty)
    AND (ProgressBar <> 1 OR ProgressBar IS NULL);


    --ZGŁOSZONE OTWARTE >90 DNI



    --Odrzucone

    -- >> KROK 1: Ustaw swoje parametry tutaj <<
DECLARE @StartDate DATE = '2024-01-01'; -- Data początkowa okresu
DECLARE @EndDate DATE = '2024-12-31';   -- Data końcowa okresu
DECLARE @Dzial NVARCHAR(100) = 'CP';      -- Nazwa działu, który Cię interesuje

-- >> KROK 2: Wykonaj zapytanie <<
SELECT
    COUNT(*) AS LiczbaOdrzuconychWnioskow
FROM
    dbo.WnioskiIdeaManagement
WHERE
    -- Warunek 1: Status musi być 'Odrzucony'
    StatusWniosku = 'Odrzucony'
    
    -- Warunek 2: Dział musi być zgodny z parametrem
    AND Dzial = @Dzial
    
    -- Warunek 3: Data zgłoszenia musi mieścić się w podanym przedziale
    AND DataZgloszenia BETWEEN @StartDate AND @EndDate;




    --Zaakceptowane zrealizowane


-- >> KROK 1: Ustaw swoje parametry tutaj <<
DECLARE @RokDocelowy INT = 2024;
DECLARE @MiesiacDocelowy INT = 12; -- 8 = Sierpień
DECLARE @Dzial NVARCHAR(100) = 'CP';

-- >> KROK 2: Wykonaj zapytanie <<
-- Automatyczne obliczenie daty końcowej na podstawie parametrów
DECLARE @DataKoncowa DATE = EOMONTH(DATEFROMPARTS(@RokDocelowy, @MiesiacDocelowy, 1));
DECLARE @DataPoczatkowa DATE = '2024-01-01';

SELECT
    COUNT(*) AS LiczbaWnioskow
FROM
    dbo.WnioskiIdeaManagement
WHERE
    -- Warunek 1: Data zgłoszenia jest w zdefiniowanym przedziale
    DataZgloszenia BETWEEN @DataPoczatkowa AND @DataKoncowa
    
    -- Warunek 2: Dział jest zgodny z parametrem
    AND Dzial = @Dzial
    
    -- Warunek 3: Status to 'Zatwierdzony'
    AND StatusWniosku = 'Zatwierdzony'
    
    -- Warunek 4: ProgressBar jest różny od 1 (lub jest pusty)
    AND (ProgressBar=1);


    